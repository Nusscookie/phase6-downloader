(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function u(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(a){if(a.ep)return;a.ep=!0;const n=u(a);fetch(a.href,n)}})();var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h={exports:{}},A=h.exports,O;function R(){return O||(O=1,(function(r,i){(function(u,l){l()})(A,function(){function u(e,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function l(e,t,d){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){y(o.response,t,d)},o.onerror=function(){console.error("could not download file")},o.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof v=="object"&&v.global===v?v:void 0,S=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!S?function(e,t,d){var o=s.URL||s.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener",typeof e=="string"?(c.href=e,c.origin===location.origin?n(c):a(c.href)?l(e,t,d):n(c,c.target="_blank")):(c.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(c.href)},4e4),setTimeout(function(){n(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,d){if(t=t||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(u(e,d),t);else if(a(e))l(e,t,d);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){n(o)})}}:function(e,t,d,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof e=="string")return l(e,t,d);var c=e.type==="application/octet-stream",F=/constructor/i.test(s.HTMLElement)||s.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||c&&F||S)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var f=w.result;f=x?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=f:location=f,o=null},w.readAsDataURL(e)}else{var D=s.URL||s.webkitURL,b=D.createObjectURL(e);o?o.location=b:location.href=b,o=null,setTimeout(function(){D.revokeObjectURL(b)},4e4)}});s.saveAs=y.saveAs=y,r.exports=y})})(h)),h.exports}var L=R();document.getElementById("output-field");const j=document.getElementById("cardListData"),T=document.getElementById("unitsListData");async function k(r){const i=`https://phase6-downloader-api.onrender.com/${r}-data`,l={method:"post",body:`{"cardList":${j.value},"unitsList":${T.value}}`};let a=null;try{a=await fetch(i,l)}catch(n){throw console.error(n),n}if(r==="pdf"){const n=await a.arrayBuffer(),s=new Blob([n],{type:"application/pdf"});L.saveAs(s,"phase-6-vocabulary.pdf")}else if(r==="anki"){const n=await a.arrayBuffer(),s=new Blob([n],{type:"application/apkg"});L.saveAs(s,"phase-6-vocabulary.apkg")}else if(r==="csv"){const n=await a.arrayBuffer(),s=new Blob([n],{type:"text/csv"});L.saveAs(s,"phase-6-vocabulary.csv")}else return}const p=document.querySelector(".progress-bar"),m=document.querySelector(".progress-bar-outside"),g=document.getElementById("output-field");async function E(r){let i=0;if(m.style.display="block",p.style.animation="none",r==="csv"||r==="anki"){i=1,p.style.animation=`start-progress-animation ${i}s forwards`;try{await k(r)}catch(u){g.textContent=u,setTimeout(()=>{m.style.display="none",g.textContent=""},i*1e3*3);return}p.style.animation="finish-progress-animation 1s forwards",setTimeout(()=>{m.style.display="none"},1e3)}else if(r==="pdf"){i=45,p.style.animation=`start-progress-animation ${i}s forwards`;try{await k(r)}catch(u){g.textContent=u,setTimeout(()=>{m.style.display="none",g.textContent=""},i*1e3*3);return}p.style.animation="finish-progress-animation 1s forwards",setTimeout(()=>{m.style.display="none"},1e3)}}const C=document.getElementById("csvButton"),M=document.getElementById("infoButton"),U=document.getElementById("apkgButton"),I=document.getElementById("output-field"),$=document.getElementById("pdfButton");let B=!0;C.addEventListener("click",()=>{E("csv")});M.addEventListener("click",_);U.addEventListener("click",()=>{E("anki")});$.addEventListener("click",()=>{E("pdf")});function q(){sessionStorage.getItem("cardListData")&&(cardListData.value=sessionStorage.getItem("cardListData")),sessionStorage.getItem("unitsListData")&&(unitsListData.value=sessionStorage.getItem("unitsListData")),cardListData.addEventListener("change",()=>{sessionStorage.setItem("cardListData",cardListData.value)}),unitsListData.addEventListener("change",()=>{sessionStorage.setItem("unitsListData",unitsListData.value)})}q();function _(){B?(I.textContent="Open your Phase6 web app, go to the library of the desired book you want to export, open developer tools (F12), navigate to the network tab, delete and refresh everything if necessary and watch out for requests called cardList and unitsFiltered. Click on them and go to the response tab. Copy the responses and paste them into the text fields. Click one of the download buttons to access your vocabulary.",B=!1):(I.textContent="",B=!0)}
